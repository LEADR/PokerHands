var Suit,Rank,Card,deck,reset;Suit={clubs:1,diamonds:2,hearts:3,spades:4},Rank={ace:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,jack:11,queen:12,king:13},Card=function(n,r){this.suit=n,this.rank=r},deck=function(){var n=[];return{addCard:function(r){if(!(r instanceof Card))throw new RangeError("Can only add a Card to the deck");n.push(r)},buildDeck:function(){var r,e,t;for(n=[],r=Suit.clubs;r<=Suit.spades;r++)for(e=Rank.ace;e<=Rank.king;e++)t=new Card(r,e),deck.addCard(t);print(n),print("Deck built.")},shuffle:function(r){"number"!=typeof r&&(r=5);var e=n.length,t,a,i,o;for(t=0;r>t;t++)for(a=0;e>a;a++)o=Math.floor(52*Math.random()),i=n[o],n[o]=n[a],n[a]=i;return"Deck shuffled "+r+" times."},dealCard:function(){if(0===n.length)throw new RangeError("No cards to deal.");n.pop()},dealUserHand:function(r){var e=[],t,a,i,o,u,d,c,f,s,h,k,l,p,g,R,w,b,m,v,y,C,S;if(n.length<r&&reset(),"number"!=typeof r)throw new RangeError("Please specify number of cards in a hand.");if(r>=52)throw new RangeError("The whole deck is not a hand...");for(n.length<r&&(print("Not enough cards. Resetting deck..."),reset()),$("body").empty(),a=0;r>a;a++)t=n.pop(),e.push(t),i=$("<ul>"),$("<li>").text(t.rank+" , "+t.suit).appendTo(i),$("body").append(i);print(n.length),o=function(n,r,e){var t=0,a=!1;return n.forEach(function(n){n===r&&t++}),t===e&&(a=!0),a},u=function(n){var r=1;return n.forEach(function(n){n.rank>=r&&(r=n.rank)}),r},d=function(n){var r=14;return n.forEach(function(n){n.rank<=r&&(r=n.rank)}),r},c=e.map(function(n){return n.rank}),f=e.map(function(n){return 1===n.rank&&(n.rank=14),n}),s=e.map(function(n){return n.suit}),h=u(e),k=d(e),l=0,p=!1,g=!1,R=!1,w=!1,b=!1,m=!1,v=!1,y=!1;for(C in Rank)o(c,Rank[C],2)&&l++,o(c,Rank[C],3)&&(g=!0),o(c,Rank[C],4)&&(m=!0);2===l&&(p=!0),l||g||m||(h-k===4&&(R=!0),h=u(f),k=d(f),h-k===4&&(R=!0));for(S in Suit)o(s,Suit[S],5)&&(w=!0);l&&g&&(b=!0),R&&w&&(v=!0),v&&10===k&&4===h&&(y=!0),print(e),print("High card: "+h),print("Low card: "+k),print(y?"Royal Flush!":v?"Straight Flush":m?"Four of a Kind":b?"Full House":w?"Flush":R?"Straight":g?"Three of a Kind":p?"Two Pair":l?"Pair":"Fold :(")}}}(),$(document).ready(function(){var n;deck.buildDeck(),deck.shuffle(50),n=deck.dealUserHand(5)}),reset=function(){deck.buildDeck(),deck.shuffle(50),print("Deck reset.")};